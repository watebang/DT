(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-586c91f3"],{"00af":function(e,r,t){},"0b69":function(e,r,t){"use strict";t.r(r),t.d(r,"default",(function(){return v}));var n=t("a34a"),a=t.n(n),o=t("ceda"),s=t("4360"),i=t("283a");function u(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?u(Object(t),!0).forEach((function(r){l(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):u(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function l(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function f(e,r,t,n,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void t(c)}i.done?r(u):Promise.resolve(u).then(n,a)}function p(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function s(e){f(o,n,a,s,i,"next",e)}function i(e){f(o,n,a,s,i,"throw",e)}s(void 0)}))}}function m(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function d(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,r,t){return r&&d(e.prototype,r),t&&d(e,t),e}var v=function(){function e(){m(this,e)}return b(e,null,[{key:"userRegister",value:function(e){return Object(o["default"])({method:"post",url:"cms/user/userRegister",data:e,handleError:!0})}},{key:"register",value:function(e){return Object(o["default"])({method:"post",url:"cms/user/register",data:e,handleError:!0})}},{key:"getToken",value:function(){var e=p(a.a.mark((function e(r,t){var n;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["post"])("cms/user/login",{username:r,password:t});case 2:return n=e.sent,Object(i["saveTokens"])(n.access_token,n.refresh_token),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));function r(r,t){return e.apply(this,arguments)}return r}()},{key:"getInformation",value:function(){var e=p(a.a.mark((function e(){var r,t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["get"])("cms/user/information");case 2:return r=e.sent,t=null===s["default"].getters.user?{}:s["default"].getters.user,e.abrupt("return",Object.assign(c({},t),r));case 5:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}()},{key:"getPermissions",value:function(){var e=p(a.a.mark((function e(){var r,t;return a.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(o["get"])("cms/user/permissions");case 2:return r=e.sent,t=null===s["default"].getters.user?{}:s["default"].getters.user,e.abrupt("return",Object.assign(c({},t),r));case 5:case"end":return e.stop()}}),e)})));function r(){return e.apply(this,arguments)}return r}()},{key:"updatePassword",value:function(e){var r=e.old_password,t=e.new_password,n=e.confirm_password;return Object(o["put"])("cms/user/change_password",{new_password:t,confirm_password:n,old_password:r})}}]),e}()},"0ef6":function(e,r,t){"use strict";t("00af")},"3d01":function(e,r,t){"use strict";t.r(r);var n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"register"},[t("div",{ref:"tiger",staticClass:"tiger"}),t("el-form",{ref:"form",staticClass:"from",attrs:{"status-icon":"","label-position":"right",model:e.form,rules:e.rules,"hide-required-asterisk":""}},[t("el-form-item",{attrs:{label:"用户名:",prop:"username"}},[t("el-input",{attrs:{clearable:"",autocomplete:"off"},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),t("el-form-item",{attrs:{label:"密码:",prop:"password"}},[t("el-input",{attrs:{clearable:"",type:"password",autocomplete:"off"},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),t("el-form-item",{attrs:{label:"确认密码:",prop:"confirm_password",autocomplete:"off"}},[t("el-input",{attrs:{clearable:"",type:"password"},model:{value:e.form.confirm_password,callback:function(r){e.$set(e.form,"confirm_password",r)},expression:"form.confirm_password"}})],1),t("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[t("el-input",{attrs:{clearable:"",autocomplete:"off"},model:{value:e.form.email,callback:function(r){e.$set(e.form,"email",r)},expression:"form.email"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary",loading:e.loading},on:{click:function(r){return e.onRegister("form")}}},[e._v("立即注册")]),t("el-button",{on:{click:e.onCallback}},[e._v("取消")])],1)],1),t("div",{ref:"rabbit",staticClass:"rabbit"})],1)},a=[],o=t("a34a"),s=t.n(o),i=t("94f1"),u=t.n(i),c=t("3cc9"),l=t("c044"),f=t("0b69");function p(e,r,t,n,a,o,s){try{var i=e[o](s),u=i.value}catch(c){return void t(c)}i.done?r(u):Promise.resolve(u).then(n,a)}function m(e){return function(){var r=this,t=arguments;return new Promise((function(n,a){var o=e.apply(r,t);function s(e){p(o,n,a,s,i,"next",e)}function i(e){p(o,n,a,s,i,"throw",e)}s(void 0)}))}}var d={name:"register",data:function(){var e=this,r=function(e,r,t){r||t(new Error("用户名不能为空")),t()},t=function(r,t,n){""===t?n(new Error("请输入密码")):t.length<6?n(new Error("密码长度不能少于6位数")):(""!==e.form.checkPassword&&e.$refs.form.validateField("confirm_password"),n())},n=function(r,t,n){""===t?n(new Error("请再次输入密码")):t!==e.form.password?n(new Error("两次输入密码不一致!")):n()};return{loading:!1,form:{username:"",password:"",confirm_password:"",email:""},rules:{username:[{validator:r,trigger:["blur","change"],required:!0}],password:[{validator:t,trigger:"blur",required:!0}],confirm_password:[{validator:n,trigger:"blur",required:!0}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:["blur","change"],required:!0}]}}},methods:{onRegister:function(){var e=m(s.a.mark((function e(r){var t=this;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs[r].validate(function(){var e=m(s.a.mark((function e(n){var a;return s.a.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n){e.next=16;break}return e.prev=1,t.loading=!0,e.next=5,f["default"].userRegister(t.form);case 5:a=e.sent,a.code<window.MAX_SUCCESS_CODE&&(t.loading=!1,t.$message.success("".concat(a.message)),t.eventBus.$emit("addUser",!0),t.resetForm(r)),e.next=14;break;case 9:e.prev=9,e.t0=e["catch"](1),t.loading=!1,10073===e.t0.data.code||10071===e.t0.data.code?t.$message.error(e.t0.data.message):t.$message.error("新增用户失败"),console.log(e.t0);case 14:e.next=18;break;case 16:console.log("error submit!!"),t.$message.error("请填写正确的信息");case 18:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(r){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function r(r){return e.apply(this,arguments)}return r}(),onCallback:function(){this.$router.go(-1)}},mounted:function(){u.a.loadAnimation({container:this.$refs.tiger,renderer:"svg",loop:!0,autoplay:!0,animationData:c}),u.a.loadAnimation({container:this.$refs.rabbit,renderer:"svg",loop:!0,autoplay:!0,animationData:l}),u.a.play()}},b=d,v=(t("0ef6"),t("2877")),w=Object(v["a"])(b,n,a,!1,null,"d15b0660",null);r["default"]=w.exports}}]);